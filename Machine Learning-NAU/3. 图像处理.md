<style>
img{
    width: 50%;
    padding-left: 30%;
}
</style>
# 图像处理
## 成像原理与数字化
- 小孔成像（Pinhole）  
  小孔成像的基本原理如下图所示：  
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207142920.png)    
- 透镜成像  
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207143053.png)  
- CCD/CMOS（电荷耦合）成像  
  在CCD成像当中，通过透镜后的像会呈现在CMOS上，COMS会将呈现数字化，这一过程中有两个重要的步骤：  
    1. **抽样**（Sampling）  
      将图像转化为有限的单位像素，如图所示：
      ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207144301.png)  
    2. **量化**（Quantization）
      用整数表示单位像素的值，对于8bit而言，单位像素的明暗程度以0~255的灰度值来表示，0表示黑色，255表示白色。  
   
  现在，一幅黑白的图像中的每一个单位像素点都用一个整数来表示其黑白的程度，那么整张图片就可以用一个只有整数的矩阵来表示（单通道）。  
  对于彩色的图像，通常以RGB（红色、绿色、蓝色）的三种程度（三通道）来进行量化，因此彩色图片的一个单位像素点以一个三维的向量，通常是$[R,G,B]$来表示。最终三个矩阵表示一幅彩色图像，这个过程叫做张量（Tensor）。  
## 点处理(Point Processing)
图像的点处理是： 设定图像上一个像素值$r(x,y)$,经过处理$s(x,y)=T(r(x,y))$后，得到同一位置的像素$s(x,y)$。    
注意：
1. $(x,y)$表示坐标。
2. 不同的图像处理库其坐标系统的原点设置不同，y的取值设定也不同。  
3. $T$只能是单调（通常是单调递增）的函数。
### 常见的点处理变换
- 阈值变换(Thresholding)   
  函数图像   
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207152536.png)   
  阈值函数可分为两种：软阈值函数（左）和硬阈值函数/二值化函数(Hard thresholding/Binarization，右),它们的作用都是将像素转换成黑白像素。   
  图像中的$m$点称为阈值，高于阈值的像素将会被强化为近黑色/黑色的像素值，低于阈值的像素值将被弱化为近白色/白色的像素值。  

- 像素反转
  $$s=L-1-r$$
  $L$表示最大的像素值。  
  作用是将像素值进行翻转，白色变为黑色，黑色变为白色。    
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207154347.png)  
 
- 对数变换  
  $$s=clog(1+r)$$
  对数变换能够扩展低灰度值（突出过曝区域的细节）而压缩高灰度值（突出过暗区域的细节），从而增强图像的清晰度。   
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207154929.png)   
- 幂变换
  $$s=cr^γ$$
  $γ$是幂指数，显示器中的伽玛校正(Gamma Correction)即调整该值使得显示器整体偏亮或偏暗。 当$0<γ<1$时，显示器偏暗，$γ<1$时，显示器偏亮。  
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207155330.png)   
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207155454.png)   

- 折线(Piecewise Linear Curves)    
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207155745.png)   

### 亮度直方图(Historgram)
亮度直方图的横轴是像素值，纵轴是该像素值内的像素点个数，它反映了黑白图像整体的像素分布情况。     
如果直方图在白色区域内比较集中，图像偏亮，直方图窄黑色区域内比较集中，图像偏暗。  
![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207160828.png)  
图像在直方图上的最大分布范围（即横轴的宽度）称为对比度(Contrast)，直方图窄的图像对比度低。通常情况下，对比度越高图像越清晰。  
![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207160857.png)    

- 直方图均衡(Historgram equalization)    
  直方图均衡是一种用于增强图像对比度的同时均衡图像亮度的方法（即拉宽和拖平直方图）。   
  直方图可以视为反映了每一个像素值在整个图像的占比关系（$\frac{n_w}{n}$，n表示图像像素点总数，$n_w$表示像素值为w的像素点数量），因此整个直方图可以被概率分布函数化：  
  $$p_r(w)=p(r=w)=\frac{n_w}{n},w=0,1,...,255$$    
  应用变换：  
  $$s=T(r)=(L-1)\int_0^rp_r(w)dw$$
  使得:  
  $$P_s(s)=P_r(r)|\frac{dr}{ds}|=\frac{1}{L-1}$$
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207162034.png)  
  由于w并不是连续的，因此最终的直方图并非是完全扁平的矩形。   
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207164743.png)
- 局部增强(Local enhancement)   
  对局部的一些像素群（例如以某个像素为中心$9 × 9$或$3 × 3$的像素）应用直方图均衡的方法称为局部增强。     
  ![](https://raw.githubusercontent.com/l61012345/Pic/master/img/20210207163241.png)   
## 相邻处理（Neighborhood Processing）  